webpackJsonp([16],{"9bBU":function(e,t,a){a("mClu");var s=a("FeBl").Object;e.exports=function(e,t,a){return s.defineProperty(e,t,a)}},C4MV:function(e,t,a){e.exports={default:a("9bBU"),__esModule:!0}},bOdI:function(e,t,a){"use strict";t.__esModule=!0;var s,i=a("C4MV"),n=(s=i)&&s.__esModule?s:{default:s};t.default=function(e,t,a){return t in e?(0,n.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},mClu:function(e,t,a){var s=a("kM2E");s(s.S+s.F*!a("+E39"),"Object",{defineProperty:a("evD5").f})},qhYp:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("bOdI"),i=a.n(s),n=a("SoR+"),r=a.n(n),o=a("o6Vb"),d=a("FT4G"),c=a("y1vT"),l=a.n(c),u=a("IcnI"),m={name:"Editinginfo",data:function(){var e;return e={userInfoData:{loginName:"",patientName:"",sex:0,addressDto:null,age:0,birthday:""},birthdayVisiual:null,validateTable:{name:{required:!0,reg:/^[\w\·\u4E00-\u9FA5]+$/,message:"姓名格式不正确"},address:{required:!0,reg:/^[\d\w\·_\s\(\)\(\)\u4E00-\u9FA5]+$/,message:"地址格式不正确"}},addressForm:{countryCode:"国家代码",countryName:"国家名称",provinceCode:"省市代码",provinceName:"省市名称",cityCode:"城市代码",cityName:"城市名称",areaCode:"区域代码",areaName:"区域名称",streetCode:"街道代码",streetName:"区域名称",address:"详细的地址"},currentAge:"",pickerAge:"",currentIndexSex:0,sexs:[{tag:"女"},{tag:"男"}],male:0,addressDetail:"",addressDetailHodler:"（例：某小区A座6号楼6单元502室）",addressVisible:!1,regionInit:!1,addressSlots:[{flex:1,values:this.getProvinceArr(),className:"slot1",textAlign:"center"},{divider:!0,content:"",className:"slot2"},{flex:1,values:this.getCityArr("北京市"),className:"slot3",textAlign:"center"},{divider:!0,content:"",className:"slot4"},{flex:1,values:this.getCoutyArr("北京市","北京市"),className:"slot5",textAlign:"center"}],slots:[{flex:1,className:"slot1",textAlign:"center"}],visiualMusk:!1,visiualAge:!1,pickerVisible:!1,dataValue:new Date,startDate:new Date("1930-01"),endDate:new Date,realAge:"0岁",addressValue:""},i()(e,"addressVisible",!1),i()(e,"addressPlainComputed",""),e},computed:{computedSexTag:function(){return this.sexs[this.userInfoData.sex].tag},addressPlainComputed_:function(){var e=this.$sessionStorage.getItem("addSelfInfoSelectedPlain");this.$sessionStorage.getItem("addSelfInfoSelected");return e},apple:function(){return"apple"}},watch:{},beforeRouteLeave:function(e,t,a){this.$sessionStorage.removeItem("addSelfInfoSelected"),this.$sessionStorage.removeItem("addSelfInfoSelectedPlain"),a()},beforeRouteEnter:function(e,t,a){a(function(e){var t=e.$store.getters.user_info.patientInfo;e.userInfoData={loginName:t.loginName,patientName:t.patientName,sex:t.sex,birthday:new Date(t.birthday),age:(new Date).getFullYear()-new Date(t.birthday).getFullYear()},e.birthdayVisiual=t.birthday})},created:function(){this.$validate.init(this)},mounted:function(){this.init()},methods:{init:function(){},addressTransform:function(e){for(var t=["provinceName","cityName","areaName","streetName"],a="",s=0;s<t.length;s++)a+=e[t[s]]?e[t[s]]:"";return a},getBirthday:function(e){if(!e)return"";var t=new Date(e),a=t.getFullYear(),s=t.getMonth()+1;return a+"-"+(s=s<10?"0"+s:s)},routeBack:function(){this.$router.push({path:"/healthrecords"})},submitModify:l()(function(){var e=this;if(!Object(d.e)(this.userInfoData.patientName))return this.$message({message:"请输入真实姓名",center:!0,type:"error",showClose:!0,duration:1e3}),void(this.userInfoData.patientName="");Object(o.s)(this.userInfoData).then(function(t){200===t.data.code&&(e.$message({message:t.data.msg,center:!0,type:"success",duration:1e3}),e.$router.push({path:"/healthrecords"}),u.a.dispatch("SET_USER_INFO"))})},500),changeSex:function(e){this.userInfoData.sex=e},clearname:function(){this.userInfoData.patientName=""},onValuesChange:function(e,t){this.pickerRel=t[0]},chooseAge:function(){this.visiualAge=!0,this.$refs.dataPicker.open()},address:function(){this.$router.push({path:"/chooseselfinfoaddress"})},disappearMusk:function(){this.visiualMusk=!1},handleConfirm:function(){},dataChange:function(e){},dateConfirm:function(e){e.setDate(15);var t=e.getFullYear(),a=e.getMonth()+1;a=a<10?"0"+a:a,this.userInfoData.birthday=e,this.birthdayVisiual=t+"-"+a,this.userInfoData.age=(new Date).getFullYear()-e.getFullYear()},showAddressPicker:function(){this.addressVisible=!0},getProvinceArr:function(){var e=[];return r.a.forEach(function(t){var a={};a.name=t.name,a.code=t.code,e.push(a)}),e},getCityArr:function(e){var t=[];return r.a.forEach(function(a){a.name===e&&a.children.forEach(function(e){var a={};a.name=e.name,a.code=e.code,t.push(a)})}),t},getCoutyArr:function(e,t){var a=[];return r.a.forEach(function(s){s.name===e&&s.children.forEach(function(e){e.name===t&&e.children.forEach(function(e){var t={};t.name=e.name,t.code=e.code,a.push(t)})})}),a},addressChange:function(e,t){this.addressForm={countryCode:"CHN",countryName:"中国",provinceCode:t[0].code,provinceName:t[0].name,cityCode:t[1].code,cityName:t[1].name,areaCode:t[2]?t[2].code:"",areaName:t[2]?t[2].name:"",streetCode:"街道代码",streetName:"区域名称"},this.userInfoData.addressDto=this.addressForm,this.addressPlainComputed=this.addressTransform(this.addressForm),e.setSlotValues(1,this.getCityArr(t[0].name)),e.setSlotValues(2,this.getCoutyArr(t[0].name,t[1].name))}}},f={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"editinginfo"}},[s("header",[s("Backfront",{attrs:{maintitle:"编辑个人信息",isNormal:!0},on:{back:e.routeBack}})],1),e._v(" "),s("main",[s("div",{staticClass:"card"},[s("p",{staticClass:"cardtitle"},[e._v("昵称:")]),e._v(" "),s("div",{staticClass:"inputwrapper"},[s("input",{directives:[{name:"validate",rawName:"v-validate:form_$nickname",value:e.validateTable.name,expression:"validateTable.name",arg:"form_$nickname"},{name:"model",rawName:"v-model",value:e.userInfoData.loginName,expression:"userInfoData.loginName"}],attrs:{type:"text"},domProps:{value:e.userInfoData.loginName},on:{input:function(t){t.target.composing||e.$set(e.userInfoData,"loginName",t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"card"},[s("p",{staticClass:"cardtitle"},[e._v("姓名:")]),e._v(" "),s("div",{staticClass:"inputwrapper"},[s("input",{directives:[{name:"validate",rawName:"v-validate:form_$relname",value:e.validateTable.name,expression:"validateTable.name",arg:"form_$relname"},{name:"model",rawName:"v-model",value:e.userInfoData.patientName,expression:"userInfoData.patientName"}],attrs:{type:"text"},domProps:{value:e.userInfoData.patientName},on:{input:function(t){t.target.composing||e.$set(e.userInfoData,"patientName",t.target.value)}}})]),e._v(" "),s("div",{staticClass:"choose relativename"},[s("img",{attrs:{src:a("lz3y")},on:{click:e.clearname}})])]),e._v(" "),s("div",{staticClass:"card"},[s("p",{staticClass:"cardtitle"},[e._v("性别:")]),e._v(" "),s("div",{staticClass:"inputwrapper"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.computedSexTag,expression:"computedSexTag"}],attrs:{type:"text",disabled:!0},domProps:{value:e.computedSexTag},on:{input:function(t){t.target.composing||(e.computedSexTag=t.target.value)}}})]),e._v(" "),s("div",{directives:[{name:"echo",rawName:"v-echo"}],staticClass:"choose sexs"},e._l(e.sexs,function(t,a){return s("div",{key:a,staticClass:"sex",on:{click:function(t){e.changeSex(a)}}},[s("span",{staticClass:"circle",class:{active:e.userInfoData.sex===a}}),e._v(" "),s("span",[e._v(e._s(t.tag))])])}))]),e._v(" "),s("div",{staticClass:"card",on:{click:e.chooseAge}},[s("p",{staticClass:"cardtitle"},[e._v("生日:")]),e._v(" "),s("div",{staticClass:"inputwrapper"},[s("span",{staticStyle:{"font-size":"1.2rem"}},[e._v(e._s(e.getBirthday(e.birthdayVisiual)))])]),e._v(" "),e._m(0)])]),e._v(" "),s("div",{staticClass:"chooseaddress"},[s("mt-popup",{staticStyle:{"{width":"100%"},attrs:{position:"bottom"},model:{value:e.addressVisible,callback:function(t){e.addressVisible=t},expression:"addressVisible"}},[s("mt-picker",{ref:"addressPicker",attrs:{valueKey:"name",visibleItemCount:5,slots:e.addressSlots,position:"bottom"},on:{change:e.addressChange}})],1)],1),e._v(" "),s("div",{staticClass:"resetmint"},[s("mt-datetime-picker",{ref:"dataPicker",attrs:{type:"date",startDate:e.startDate,endDate:e.endDate,visiual:e.pickerVisible,"year-format":"{value} 年","month-format":"{value} 月"},on:{confirm:e.dateConfirm,change:e.dataChange},model:{value:e.userInfoData.birthday,callback:function(t){e.$set(e.userInfoData,"birthday",t)},expression:"userInfoData.birthday"}})],1),e._v(" "),s("footer",[s("div",{staticClass:"confirm",on:{click:e.submitModify}},[e._v("提交")])]),e._v(" "),e.visiualMusk?s("div",{attrs:{id:"mask"},on:{click:e.disappearMusk}},[s("div",{attrs:{id:"changer"}},[e.visiualRel?s("div",{staticClass:"wrapper rel"},[s("div",{staticClass:"header"},[s("div",[e._v("取消")]),e._v(" "),s("div",{on:{click:function(t){return t.stopPropagation(),e.confirmModifyRel(t)}}},[e._v("确定")])]),e._v(" "),s("mt-picker",{attrs:{slots:e.slots},on:{change:e.onValuesChange}})],1):e._e()])]):e._e()])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"choose"},[t("span",{staticStyle:{"padding-right":"1rem"}},[this._v("请选择")]),this._v(" "),t("img",{attrs:{src:a("WkfF")}})])}]};var v=a("VU/8")(m,f,!1,function(e){a("y7/6")},"data-v-36811a84",null);t.default=v.exports},"y7/6":function(e,t){}});