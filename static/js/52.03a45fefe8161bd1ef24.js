webpackJsonp([52],{esSw:function(t,e){},ootc:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("2uEE"),i=n.n(o),r=n("q4mE"),a=n.n(r),s={name:"ChooseAddress",data:function(){return{currentIndex:null,searching:"",currentTouchStartEvent:null,camp:null}},computed:{baidumap:function(){return this.$store.getters.baidumap},coords:function(){return this.$store.getters.coords},positionNeighbor:function(){return this.$store.state.positionModule.position.pois}},watch:{},mounted:function(){this.init()},methods:{init:function(){var t=this.$sessionStorage.getItem("currentPatient"),e=JSON.parse(t.address);console.log(e);var n=this;if(window.BMap&&this.coords){this.map=new window.BMap.Map("mapcontainer"),this.map.centerAndZoom(new window.BMap.Point(this.coords.longitude,this.coords.latitude),15);var o=i.a;this.map.setMapStyle({styleJson:o}),this.map.addEventListener("dragstart",function(){n.$refs.inputing.blur()});var r=new window.BMap.Geocoder;this.map.addEventListener("touchstart",function(t){n.currentTouchStartEvent=t}),this.map.addEventListener("touchend",function(){var t=n.currentTouchStartEvent.point;n.$sessionStorage.setItem("lon_lat",{lat:t.lat,lon:t.lng}),r.getLocation(t,function(t){var e=t.addressComponents;n.camp={countryCode:"0",countryName:"中国",provinceCode:"",provinceName:e.province,cityCode:n.$store.state.positionModule.position.cityCode.toString(),cityName:e.city,areaCode:n.$store.state.positionModule.position.addressComponent.adcode,areaName:e.district,streetCode:"",streetName:e.street,address:e.streetNumber},n.campPlain=t.address,n.searching=e.province+e.city+e.district+e.street+e.streetNumber});var e=new window.BMap.Icon(a.a,new window.BMap.Size(50,50)),o=new window.BMap.Marker(t,{icon:e}),i=new window.BMap.Circle(t,200,{strokeColor:"transparent",strokeWeight:1,strokeOpacity:0,fillColor:"#15baff",fillOpacity:.25}),s=new window.BMap.Circle(t,800,{strokeColor:"transparent",strokeWeight:1,strokeOpacity:0,fillColor:"#15baff",fillOpacity:.1});n.map.clearOverlays(),n.map.addOverlay(o),n.map.addOverlay(i),n.map.addOverlay(s)})}},routeBack:function(){this.$sessionStorage.getItem("lon_lat")?this.$router.go(-1):alert("请选择地址!")},getDis:function(t){return t<1e3?t+"m":Math.ceil((t/1e3).toFixed(2))+"km"},confirm:function(){this.$sessionStorage.getItem("lon_lat")?(this.$sessionStorage.setItem("chooseAddressOfPatient",this.camp),this.$sessionStorage.setItem("chooseAddressOfPatientPlain",this.campPlain),this.$router.go(-1)):alert("请选择地址!")},chooseNeg:function(t){this.currentIndex=t},search:function(){var t=this;(new window.BMap.Geocoder).getPoint(this.searching,function(e){e&&(t.map.centerAndZoom(e,15),t.map.addOverlay(new window.BMap.Marker(e)))})}}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"chooseaddress"}},[n("header",[n("Backfront",{attrs:{maintitle:"选择您的地址",isNormal:!0,nextTitle:"下一步"},on:{back:t.routeBack}})],1),t._v(" "),n("div",{attrs:{id:"searching"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.searching,expression:"searching"}],ref:"inputing",attrs:{type:"text",placeholder:"请在这里搜索地址..."},domProps:{value:t.searching},on:{keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.search(e):null},input:function(e){e.target.composing||(t.searching=e.target.value)}}})]),t._v(" "),t._m(0),t._v(" "),n("div",{staticClass:"tail"}),t._v(" "),n("footer",[n("div",{staticClass:"confirm",on:{click:t.confirm}},[t._v("确定")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("main",[e("div",{attrs:{id:"mapcontainer"}})])}]};var d=n("VU/8")(s,c,!1,function(t){n("esSw")},"data-v-30643a36",null);e.default=d.exports}});