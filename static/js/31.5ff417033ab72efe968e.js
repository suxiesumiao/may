webpackJsonp([31],{"2GJI":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAzCAYAAAA6oTAqAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkE5QzE0OEIzMEIwODExRTlCQTQzRkRBRDg2MDNENENCIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkE5QzE0OEI0MEIwODExRTlCQTQzRkRBRDg2MDNENENCIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTlDMTQ4QjEwQjA4MTFFOUJBNDNGREFEODYwM0Q0Q0IiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTlDMTQ4QjIwQjA4MTFFOUJBNDNGREFEODYwM0Q0Q0IiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz44ENlJAAACnklEQVR42uyYsU4CQRCGT3I9l9DYoZ2d9wAmYKeVR20BPgHnE4BPAE+gmNALlYWFmthz9CZiZ2EiJj6Au8loNhOO25ndhTt0kgmuBzP338zNfndbleGZ59C2hR8IfwN/tp3g/fTy92/fkYi68JbwJvr/rvCZqytXshxPCkiE3y8QIq3rsg1sVGYHRMTCyxrfzaWYtFZam/nMVpJV2PdyZrpiAhAghVQt5o9hIMzhXpu7FBNCQp1WmsLJBJpVk23aU9afkGtge5rJCjwIn2gKGYPwOnyONX7TR2s5PK4gb92WmBiC1ghxkoz1IkurXg1G+wCqzBaz43ovIFgT7qcuV0xLY69Iu5EjaI8I1jZMnksHRNVNBwAl6Y3DKlWh9R7hgs9WgTOuTd5PL9B6gYmYc+GH4FN0TI7VBhxrwJpraqxFuTxovZjbZo9olMZQdnXMjtC6wxSToFijlMnXgYk3K2qbLQXXEuFHASIDj7CmnmDAieUTpkmilBRvqCcKW+nijE4uUiyfmKTK2NG5gshASxHzuqQyHNDUgVaPglU+QUioJIgR8Y5h51cn0ImBkBBNxrbNdwAz9KyRBZaJQVXmGeuVvdAoxJNmDVorSXkWidE0MwFNNRcpFmUA9FYImj2bT5qFNBegmQaHNkHTqM2ooDky2GsSbqw/2WZZ8Bdx4TCPoLnPhcO8giYLDtcFmir8hQve4rDgcB2gieEvQpskBk1tOFwHaGbBX8KFwzyCZuDlwCig2VeuUoSOt9FVNAXNPicWZQC0DY97FnP9E0Aa/F0XGTQx/Elr/oNmDtosRBtZq8igKdFlsuS4bIMPi1z24bIyhbCtyvDsSHzeFlyHnIB7sjLHG1CU8o+YjZpmX5siRk6zC+F3G6Dl6VuAAQDhaK3YNJpy3wAAAABJRU5ErkJggg=="},qTmW:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("mvHQ"),r=i.n(n);function a(t,e,i){this._center=t,this._length=e,this._color=i}a.prototype=new window.BMap.Overlay,a.prototype.initialize=function(t){this._map=t;var e=document.createElement("div"),i=document.createElement("p");return i.innerHTML="<span style='font-weight: 900; font-size: 14px;'>·</span><span>我在这儿</span>",e.appendChild(i),e.setAttribute("class","currentlocation"),e.style.position="absolute",e.style.width=this._length+"px",e.style.height=this._length+"px",e.style.backgroundColor=this._color,t.getPanes().markerPane.appendChild(e),this._div=e,e},a.prototype.draw=function(){var t=this._map.pointToOverlayPixel(this._center);this._div.style.left=t.x-this._length/2+"px",this._div.style.top=t.y-this._length/2+"px"},a.prototype.show=function(){this._div&&(this._div.style.display="")},a.prototype.hide=function(){this._div&&(this._div.style.display="none")},a.prototype.toggle=function(){this._div&&(""==this._div.style.display?this.hide():this.show())};var s=a,o=i("2GJI"),l=i.n(o),c=i("2uEE"),u=i.n(c),h=i("Dvzh"),m=i("y1vT"),d={name:"WaitForCure",data:function(){return{timerVisual:"00:00",overFlowText:"",milliseUp:0,timerUp:null,timerDown:null,fromPathName:"",currentInterval:null,intervalIndex:null,watingIsOver:!1}},computed:{baidumap:function(){return this.$store.getters.baidumap},coords:function(){return this.$store.getters.coords},waittimeCom:function(){return this.$route.query.waittime},waringStyle:function(){return this.overFlowText?{"background-color":"#ffb3b3"}:{}}},watch:{},beforeRouteEnter:function(t,e,i){i(function(t){t.fromPathName=e.name})},created:function(){var t=(new Date).getTime(),e={id:this.$route.query.orderid,tag:Boolean(this.$route.query.waittime),createTime:t},i=JSON.parse(window.sessionStorage.getItem("LOCAL_INTERVAL"))||[];if(0===i.length)this.intervalIndex=0,i.push(e),this.currentInterval=e;else{for(var n=null,a=0;a<i.length;a++)if(i[a].id===this.$route.query.orderid){n=a,this.intervalIndex=a,this.currentInterval=i[a];var s=i[a].tag;this.$route.query.waittime&&(this.currentInterval={id:i[a].id,tag:!0,createTime:s?t:i[a].createTime});break}null===n&&(i.push(e),this.currentInterval=e,this.intervalIndex=0)}window.sessionStorage.setItem("LOCAL_INTERVAL",r()(i))},mounted:function(){this.init(),this.$route.query.waittime?this.waitDoctorTime():this.getCountDownTime()},beforeDestroy:function(){clearInterval(this.timerUp),clearInterval(this.timerDown)},methods:{back:function(){this.$router.push({path:"/treatmentlist"})},waitDoctorTime:function(){var t=this,e=60*this.$route.query.waittime;this.milliseDown=parseInt(e-((new Date).getTime()-this.currentInterval.createTime)/1e3),this.timerDown=setInterval(function(){if(t.milliseDown--,t.milliseDown<=0)return t.timerVisual="",t.overFlowText="医生正在赶来请耐心等待...",t.watingIsOver=!0,void clearInterval(t.timerDown);var e=parseInt(t.milliseDown/60),i=t.milliseDown%60;e=e<10?"0"+e:e,i=i<10?"0"+i:i,t.timerVisual=e+":"+i},1e3)},getCountDownTime:function(){var t=this;this.milliseUp=parseInt(((new Date).getTime()-this.currentInterval.createTime)/1e3),this.timerUp=setInterval(function(){t.milliseUp++;var e=parseInt(t.milliseUp/60),i=t.milliseUp%60;e=e<10?"0"+e:e,i=i<10?"0"+i:i,t.timerVisual=e+":"+i},1e3)},init:function(){if(window.BMap&&this.coords){this.map=new window.BMap.Map("currentmap"),this.map.centerAndZoom(new window.BMap.Point(this.coords.longitude,this.coords.latitude),15);var t=u.a;this.map.setMapStyle({styleJson:t}),this.loading=!1;new s(this.map.getCenter(),100,"rgba(191, 191, 191, .8)");var e=new window.BMap.Point(this.coords.longitude,this.coords.latitude),i=new window.BMap.Circle(e,300,{strokeColor:"transparent",strokeWeight:1,strokeOpacity:0,fillColor:"#222222",fillOpacity:.25}),n=new window.BMap.Circle(e,600,{strokeColor:"transparent",strokeWeight:1,strokeOpacity:0,fillColor:"#222222",fillOpacity:.1});this.map.addOverlay(i),this.map.addOverlay(n),this.map.addOverlay(new window.BMap.Marker(e,{icon:new window.BMap.Icon(l.a,new window.BMap.Size(50,50))}))}},cancelOrder:i.n(m)()(function(){var t=this;this.$doctorConfirm({title:"请谨慎操作~",content:"确认要取消?",cancelText:"再想想",confirmText:"是的"}).then(function(e){Object(h.a)({orderId:t.$route.query.orderid}).then(function(e){200===e.data.code&&t.$router.push({path:"treatmentlist"}),t.$message({message:e.data.msg})})}).catch(function(t){})},300)}},p={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"waitforcure"}},[i("header",[i("Backfront",{attrs:{isNormal:!0,maintitle:"等待接诊"},on:{back:t.back}})],1),t._v(" "),i("div",{staticClass:"rule"},[i("router-link",{attrs:{to:"accountability"}},[t._v("问责规则以及责任提醒")])],1),t._v(" "),i("div",{staticClass:"waiting"},[void 0===t.waittimeCom?i("p",{staticClass:"title sup"},[i("span",[t._v("正在为您预约医生， 请您耐心等待...")])]):t._e(),t._v(" "),void 0!==t.waittimeCom||t.watingIsOver?t._e():i("p",{staticClass:"title sub"},[t._v("已经等待...")]),t._v(" "),null===t.waittimeCom?i("p",{staticClass:"title sup"},[i("span",[t._v("正在为您预约医生， 请您耐心等待...")])]):t._e(),t._v(" "),t.waittimeCom?i("p",{staticClass:"title sup"},[t.watingIsOver?i("span",[t._v("请您耐心等待...")]):i("span",[t._v("医生正在赶来...")])]):t._e(),t._v(" "),i("p",{staticClass:"time"},[i("code",[t._v(t._s(t.timerVisual))]),t._v(" "),i("span",{staticStyle:{"font-size":"2rem"}},[t._v(t._s(t.overFlowText))])])]),t._v(" "),i("main",{attrs:{id:"currentmap"}}),t._v(" "),i("footer",[i("span",{staticClass:"cancelOrder",on:{click:t.cancelOrder}},[t._v("取消订单")])])])},staticRenderFns:[]};var w=i("VU/8")(d,p,!1,function(t){i("r4Ed")},"data-v-b1c1e662",null);e.default=w.exports},r4Ed:function(t,e){}});