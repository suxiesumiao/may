webpackJsonp([40],{HLrY:function(e,t){},bcuo:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("o6Vb"),i=s("FT4G"),o={name:"ChangePassword",data:function(){return{timer:59,phoneNumber:"",newpass:"",makeshow:!1,codeImageSrc:"",imgCode:"",imgKey:"",verfiy_code:"",isCodeCheckSended:!1}},mounted:function(){this.phoneNumber=this.$localStorage.getItem("phoneNumber")||"",this.get_graphic_code()},methods:{permitSub:function(){return!this.newpass},back:function(){this.$router.push({path:"/setting"})},clear:function(){this.newpass=""},close:function(){this.makeshow=!1,Cookies.remove("token",{path:"/"}),this.$router.push({path:"/login"})},get_graphic_code:function(){var e=this;Object(a.j)().then(function(t){e.codeImageSrc="data:image/png;base64,"+t.data.data.baseImg,e.imgKey=t.data.data.imgKey})},get_code_check:function(){var e=this,t=this;Object(a.v)({mobile:t.phoneNumber,imgCode:t.imgCode,imgKey:t.imgKey}).then(function(s){if(200===s.data.code){e.sms_id=String(s.data.data.sms_id),e.isCodeCheckSended=!0;var a=setInterval(function(){t.timer--,0===t.timer&&(clearInterval(a),t.isCodeCheckSended=!1,t.timer=59)},1e3);e.$message({message:s.data.msg,center:!0,type:"success",showClose:!0,duration:1e3})}})},submit:function(){var e=this;if(!Object(i.c)(this.newpass))return this.$message({message:"请输入6-8个字符,仅支持英文大小写、数字组合和特殊符号",center:!0,type:"error",showClose:!0,duration:1e3}),this.newpass="",void(this.makeshow=!1);Object(a.r)({sms_id:this.sms_id,verfiy_code:this.verfiy_code,password:this.newpass,mobile:this.phoneNumber}).then(function(t){200===t.data.code&&(e.$message({message:t.data.msg,center:!0,type:"success",showClose:!0,duration:1e3}),e.makeshow=!0)})}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"changepassword"}},[a("header",[a("Backfront",{staticStyle:{color:"#fff"},attrs:{maintitle:"修改密码",isNormal:!0},on:{back:e.back}})],1),e._v(" "),a("div",{staticClass:"passcon"},[a("div",{staticClass:"item"},[a("span",[e._v("手机号码:")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.phoneNumber,expression:"phoneNumber"}],attrs:{disabled:"",type:"text"},domProps:{value:e.phoneNumber},on:{input:function(t){t.target.composing||(e.phoneNumber=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"item"},[a("span",[e._v("新密码:")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newpass,expression:"newpass"}],staticClass:"new",attrs:{type:"text",placeholder:"(6-8个字符,仅支持英文大小写、数字组合和特殊符号)"},domProps:{value:e.newpass},on:{input:function(t){t.target.composing||(e.newpass=t.target.value)}}}),e._v(" "),a("img",{staticClass:"delicon",attrs:{src:s("XXoX")},on:{click:e.clear}})]),e._v(" "),a("div",{staticClass:"item"},[a("span",[e._v("图形验证码:")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.imgCode,expression:"imgCode",modifiers:{trim:!0}}],attrs:{type:"text"},domProps:{value:e.imgCode},on:{input:function(t){t.target.composing||(e.imgCode=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),a("img",{staticClass:"graphic",attrs:{src:e.codeImageSrc},on:{click:e.get_graphic_code}})]),e._v(" "),a("div",{staticClass:"item"},[a("span",[e._v("短信验证码:")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.verfiy_code,expression:"verfiy_code"}],attrs:{type:"text"},domProps:{value:e.verfiy_code},on:{input:function(t){t.target.composing||(e.verfiy_code=t.target.value)}}}),e._v(" "),a("button",{staticClass:"code_check_area",class:{isDisabled:e.isCodeCheckSended},attrs:{disabled:e.isCodeCheckSended},on:{click:e.get_code_check}},[e._v(e._s(e.isCodeCheckSended?e.timer+" 秒之后重试":"发送验证码"))])])]),e._v(" "),a("footer",[a("button",{attrs:{disabled:e.permitSub()},on:{click:e.submit}},[e._v("确认修改")])]),e._v(" "),a("Succalert",{directives:[{name:"show",rawName:"v-show",value:e.makeshow,expression:"makeshow"}],attrs:{maintitle:"您已修改成功！"},on:{close:e.close}})],1)},staticRenderFns:[]};var r=s("VU/8")(o,n,!1,function(e){s("HLrY")},"data-v-7e978fac",null);t.default=r.exports}});